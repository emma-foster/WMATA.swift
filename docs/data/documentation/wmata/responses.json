{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Every "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Endpoint"},{"type":"text","text":" has a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Endpoint\/Response"},{"type":"text","text":". This is the structure returned by the WMATA API, with some additions. This package attempts to enrich responses from the WMATA API with useful structures. Responses vary between the Standard API and GTFS API."}]},{"anchor":"Standard-API","level":2,"type":"heading","text":"Standard API"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The Standard API returns JSON and is where this package focuses heavily. Responses from the Standard API are "},{"type":"codeVoice","code":"Codable"},{"type":"text","text":" and generally match the shape of responses from WMATA with a few (hopefully welcome) additions."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When using the Standard API, you’ll be able to treat the response as a typical Swift struct."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here’s some examples of what you’ll find in these responses. Let’s look at "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains"},{"type":"text","text":" as an example."}]},{"anchor":"Stations-and-Lines","level":3,"type":"heading","text":"Stations and Lines"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This package converts station codes and line codes into "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Station"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Line"},{"type":"text","text":" respectively. So, in WMATA’s response for the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains"},{"type":"text","text":" API, you could receive "},{"type":"codeVoice","code":"E10"},{"type":"text","text":" as a destination station. However, "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains\/Response\/Prediction\/destination"},{"type":"text","text":" maps "},{"type":"codeVoice","code":"E10"},{"type":"text","text":" to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Station\/greenbelt"},{"type":"text","text":" instead. You can still receive the original station code by calling "},{"type":"codeVoice","code":"rawValue"},{"type":"text","text":" on "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Station\/greenbelt"},{"type":"text","text":". "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Station"},{"type":"text","text":" instances also provide many helper variables and functions to receive data this is not available via the API."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Similarly for line codes, "},{"type":"codeVoice","code":"BL"},{"type":"text","text":" gets converted to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Line\/blue"},{"type":"text","text":" in many responses. Metrobus stops and routes are also marked as their own type, but they are simply backed by strings with no additional information available."}]},{"anchor":"Data-Wrangling","level":3,"type":"heading","text":"Data Wrangling"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In some cases data that comes from WMATA’s API can be deceiptful or confusing. This package makes attempts to place this data into nicer formats. Let’s look at some examples."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains"},{"type":"text","text":" API, the "},{"type":"codeVoice","code":"Car"},{"type":"text","text":" field, for checking the number of cars a train has, can be "},{"type":"codeVoice","code":"\"6\""},{"type":"text","text":" or "},{"type":"codeVoice","code":"\"8\""},{"type":"text","text":", as you might expect from typical Metrorail usage. However, it can also be "},{"type":"codeVoice","code":"\"-\""},{"type":"text","text":" or "},{"type":"codeVoice","code":"nil"},{"type":"text","text":". Stange values that can be tricky to check for since all of this data is just a string. In this package "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains\/Response\/Prediction\/car"},{"type":"text","text":" is parsed and is an optional enum that can only be "},{"type":"codeVoice","code":".six"},{"type":"text","text":", "},{"type":"codeVoice","code":".eight"},{"type":"text","text":" or "},{"type":"codeVoice","code":"nil"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Again in the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains"},{"type":"text","text":" API, the "},{"type":"codeVoice","code":"Min"},{"type":"text","text":" field, for checking the minutes until a train arrives, can be a number within a string, "},{"type":"codeVoice","code":"\"ARR\""},{"type":"text","text":", "},{"type":"codeVoice","code":"\"BRD\""},{"type":"text","text":", "},{"type":"codeVoice","code":"\"---\""},{"type":"text","text":" or "},{"type":"codeVoice","code":"\"\""},{"type":"text","text":". Again, this is confusing and difficult to parse. In this package "},{"type":"reference","isActive":true,"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains\/Response\/Prediction\/minutes-swift.property"},{"type":"text","text":" is parsed into an enum with possible values "},{"type":"codeVoice","code":".minutes(Int)"},{"type":"text","text":", "},{"type":"codeVoice","code":".arriving"},{"type":"text","text":", "},{"type":"codeVoice","code":".boarding"},{"type":"text","text":", or "},{"type":"codeVoice","code":".unknown"},{"type":"text","text":". This should allow you to more easily parse the data coming from WMATA’s API in your app in a swifty way."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You’ll find these kind of additions in many responses."}]},{"anchor":"GTFS-API","level":2,"type":"heading","text":"GTFS API"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The GTFS responses are actually instances of "},{"type":"reference","isActive":true,"identifier":"https:\/\/developers.google.com\/protocol-buffers"},{"type":"text","text":" structures. When you make a call, you’ll receive a "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/emma-k-alexandra\/GTFS\/blob\/main\/Sources\/GTFS\/gtfs_realtime.pb.swift#L55"},{"type":"text","text":" that you’ll need to parse through for data relevant to your call. Here’s an example."}]},{"type":"codeListing","syntax":"swift","code":["let response = try! await endpoint.request().get() # In your code, unwrap properly","","try response.jsonString()"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Then, you would need to build your own structures to decode this JSON string. I hope to bring better support for GTFS structures in the future."}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/wmata\/responses"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/WMATA\/documentation\/WMATA\/Responses","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"How to handle data you receive back from an API."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Responses","role":"article","modules":[{"name":"WMATA"}]},"hierarchy":{"paths":[["doc:\/\/WMATA\/documentation\/WMATA"],["doc:\/\/WMATA\/documentation\/WMATA","doc:\/\/WMATA\/documentation\/WMATA\/Endpoints"]]},"seeAlsoSections":[{"title":"Getting Started","identifiers":["doc:\/\/WMATA\/documentation\/WMATA\/APIKey","doc:\/\/WMATA\/documentation\/WMATA\/Endpoints","doc:\/\/WMATA\/documentation\/WMATA\/StandardGTFSAPI"],"generated":true}],"references":{"https://developer.wmata.com":{"title":"WMATA’s Developer Website","titleInlineContent":[{"type":"text","text":"WMATA’s Developer Website"}],"type":"link","identifier":"https:\/\/developer.wmata.com","url":"https:\/\/developer.wmata.com"},"doc://WMATA/documentation/WMATA/Endpoints":{"role":"collectionGroup","title":"Endpoints","abstract":[{"type":"text","text":"Understanding endpoints and how to make requests the way you need."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Endpoints","kind":"article","type":"topic","url":"\/documentation\/wmata\/endpoints"},"doc://WMATA/documentation/WMATA/Endpoint":{"role":"symbol","title":"Endpoint","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Endpoint"}],"abstract":[{"type":"text","text":"Protocol defining a WMATA API endpoint."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Endpoint","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Endpoint"}],"url":"\/documentation\/wmata\/endpoint"},"doc://WMATA/documentation/WMATA/Rail/NextTrains":{"role":"symbol","title":"Rail.NextTrains","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"NextTrains"}],"abstract":[{"type":"text","text":"Next train arrival information for one or more stations"}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"NextTrains"}],"url":"\/documentation\/wmata\/rail\/nexttrains"},"doc://WMATA/documentation/WMATA/Station":{"role":"symbol","title":"Station","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"Station"}],"abstract":[{"type":"text","text":"A Metrorail station"},{"type":"text","text":" "},{"type":"image","identifier":"metrorail-station"}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Station","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Station"}],"url":"\/documentation\/wmata\/station"},"doc://WMATA/documentation/WMATA/Line":{"role":"symbol","title":"Line","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"Line"}],"abstract":[{"type":"text","text":"A Metrorail line"},{"type":"text","text":" "},{"type":"image","identifier":"metrorail-map"}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Line","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Line"}],"url":"\/documentation\/wmata\/line"},"doc://WMATA/documentation/WMATA/StandardGTFSAPI":{"role":"collectionGroup","title":"Standard vs GTFS API","abstract":[{"type":"text","text":"Choosing which API to use in your application."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/StandardGTFSAPI","kind":"article","type":"topic","url":"\/documentation\/wmata\/standardgtfsapi"},"doc://WMATA/documentation/WMATA/Station/greenbelt":{"role":"symbol","title":"Station.greenbelt","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"greenbelt"}],"abstract":[],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Station\/greenbelt","kind":"symbol","type":"topic","url":"\/documentation\/wmata\/station\/greenbelt"},"https://developers.google.com/protocol-buffers":{"title":"Protocol Buffer","titleInlineContent":[{"type":"text","text":"Protocol Buffer"}],"type":"link","identifier":"https:\/\/developers.google.com\/protocol-buffers","url":"https:\/\/developers.google.com\/protocol-buffers"},"doc://WMATA/documentation/WMATA/Rail/NextTrains/Response/Prediction/minutes-swift.property":{"role":"symbol","title":"minutes","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"minutes"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Rail","preciseIdentifier":"s:5WMATA4RailO"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"NextTrains","preciseIdentifier":"s:5WMATA4RailO10NextTrainsV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Response","preciseIdentifier":"s:5WMATA4RailO10NextTrainsV8ResponseV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Prediction","preciseIdentifier":"s:5WMATA4RailO10NextTrainsV8ResponseV10PredictionV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Minutes","preciseIdentifier":"s:5WMATA4RailO10NextTrainsV8ResponseV10PredictionV7MinutesO"}],"abstract":[{"type":"text","text":"Time until arrival, not neccesarily in minutes"}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains\/Response\/Prediction\/minutes-swift.property","kind":"symbol","type":"topic","url":"\/documentation\/wmata\/rail\/nexttrains\/response\/prediction\/minutes-swift.property"},"doc://WMATA/documentation/WMATA":{"role":"collection","title":"WMATA","abstract":[{"type":"text","text":"WMATA is an interface to the Washington Metropolitan Area Transit Authority API."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA","kind":"symbol","type":"topic","url":"\/documentation\/wmata"},"https://github.com/emma-k-alexandra/GTFS/blob/main/Sources/GTFS/gtfs_realtime.pb.swift#L55":{"title":"TransitRealtime_FeedMessage","titleInlineContent":[{"type":"codeVoice","code":"TransitRealtime_FeedMessage"}],"type":"link","identifier":"https:\/\/github.com\/emma-k-alexandra\/GTFS\/blob\/main\/Sources\/GTFS\/gtfs_realtime.pb.swift#L55","url":"https:\/\/github.com\/emma-k-alexandra\/GTFS\/blob\/main\/Sources\/GTFS\/gtfs_realtime.pb.swift#L55"},"doc://WMATA/documentation/WMATA/APIKey":{"role":"symbol","title":"APIKey","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"APIKey"}],"abstract":[{"type":"text","text":"A WMATA API Key available from "},{"type":"reference","isActive":true,"identifier":"https:\/\/developer.wmata.com"},{"type":"text","text":"."}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/APIKey","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"APIKey"}],"url":"\/documentation\/wmata\/apikey"},"doc://WMATA/documentation/WMATA/Rail/NextTrains/Response/Prediction/destination":{"role":"symbol","title":"destination","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"destination"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Station","preciseIdentifier":"s:5WMATA7StationO"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Destination station"}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains\/Response\/Prediction\/destination","kind":"symbol","type":"topic","url":"\/documentation\/wmata\/rail\/nexttrains\/response\/prediction\/destination"},"doc://WMATA/documentation/WMATA/Line/blue":{"role":"symbol","title":"Line.blue","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"blue"}],"abstract":[{"type":"text","text":"Blue Line"}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Line\/blue","kind":"symbol","type":"topic","url":"\/documentation\/wmata\/line\/blue"},"doc://WMATA/documentation/WMATA/Endpoint/Response":{"role":"symbol","title":"Response","fragments":[{"kind":"keyword","text":"associatedtype"},{"kind":"text","text":" "},{"kind":"identifier","text":"Response"}],"abstract":[{"type":"text","text":"The response WMATA sends back when calling this endpoint"}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Endpoint\/Response","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/wmata\/endpoint\/response"},"doc://WMATA/documentation/WMATA/Rail/NextTrains/Response/Prediction/car":{"role":"symbol","title":"car","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"car"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Rail","preciseIdentifier":"s:5WMATA4RailO"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"NextTrains","preciseIdentifier":"s:5WMATA4RailO10NextTrainsV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Response","preciseIdentifier":"s:5WMATA4RailO10NextTrainsV8ResponseV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Prediction","preciseIdentifier":"s:5WMATA4RailO10NextTrainsV8ResponseV10PredictionV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Cars","preciseIdentifier":"s:5WMATA4RailO10NextTrainsV8ResponseV10PredictionV4CarsO"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Number of cars on a train"}],"identifier":"doc:\/\/WMATA\/documentation\/WMATA\/Rail\/NextTrains\/Response\/Prediction\/car","kind":"symbol","type":"topic","url":"\/documentation\/wmata\/rail\/nexttrains\/response\/prediction\/car"}}}